zerops:
  - setup: prod
    build:
      base: nodejs@22
      buildCommands:
        - npm i
        - npm run build
        - mv node_modules{,.old} && mv package-lock.json{,.old}
        - npm i --prod
      deployFiles:
        - ./node_modules
        - ./dist
        - package.json
    run:
      base: nodejs@22
      ports:
        - port: 3000
          httpSupport: true
      start: npm run start:prod

  - setup: dev
    build:
      base: nodejs@22
      buildCommands:
        - npm i
      deployFiles:
        - ./
    run:
      start: zsc noop
